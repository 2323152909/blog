(window.webpackJsonp=window.webpackJsonp||[]).push([[283],{633:function(s,t,a){"use strict";a.r(t);var n=a(6),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("p",[s._v("本章我们会讲解"),t("code",[s._v("Fiber节点")]),s._v("是如何被创建并构建"),t("code",[s._v("Fiber树")]),s._v("的。")]),s._v(" "),t("p",[t("code",[s._v("render阶段")]),s._v("开始于"),t("code",[s._v("performSyncWorkOnRoot")]),s._v("或"),t("code",[s._v("performConcurrentWorkOnRoot")]),s._v("方法的调用。这取决于本次更新是同步更新还是异步更新。")]),s._v(" "),t("p",[s._v("我们现在还不需要学习这两个方法，只需要知道在这两个方法中会调用如下两个方法：")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// performSyncWorkOnRoot会调用该方法")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("workLoopSync")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("workInProgress "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!==")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("performUnitOfWork")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("workInProgress"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// performConcurrentWorkOnRoot会调用该方法")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("workLoopConcurrent")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("workInProgress "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!==")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("shouldYield")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("performUnitOfWork")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("workInProgress"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")]),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("p",[s._v("可以看到，他们唯一的区别是是否调用"),t("code",[s._v("shouldYield")]),s._v("。如果当前浏览器帧没有剩余时间，"),t("code",[s._v("shouldYield")]),s._v("会中止循环，直到浏览器有空闲时间后再继续遍历。")]),s._v(" "),t("p",[t("code",[s._v("workInProgress")]),s._v("代表当前已创建的"),t("code",[s._v("workInProgress fiber")]),s._v("。")]),s._v(" "),t("p",[t("code",[s._v("performUnitOfWork")]),s._v("方法会创建下一个"),t("code",[s._v("Fiber节点")]),s._v("并赋值给"),t("code",[s._v("workInProgress")]),s._v("，并将"),t("code",[s._v("workInProgress")]),s._v("与已创建的"),t("code",[s._v("Fiber节点")]),s._v("连接起来构成"),t("code",[s._v("Fiber树")]),s._v("。")]),s._v(" "),t("blockquote",[t("p",[s._v("你可以从"),t("a",{attrs:{href:"https://github.com/facebook/react/blob/970fa122d8188bafa600e9b5214833487fbf1092/packages/react-reconciler/src/ReactFiberWorkLoop.new.js#L1599",target:"_blank",rel:"noopener noreferrer"}},[s._v("这里"),t("OutboundLink")],1),s._v("看到"),t("code",[s._v("workLoopConcurrent")]),s._v("的源码")])]),s._v(" "),t("p",[s._v("我们知道"),t("code",[s._v("Fiber Reconciler")]),s._v("是从"),t("code",[s._v("Stack Reconciler")]),s._v("重构而来，通过遍历的方式实现可中断的递归，所以"),t("code",[s._v("performUnitOfWork")]),s._v("的工作可以分为两部分：“递”和“归”。")]),s._v(" "),t("h2",{attrs:{id:"递-阶段"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#递-阶段"}},[s._v("#")]),s._v(" “递”阶段")]),s._v(" "),t("p",[s._v("首先从"),t("code",[s._v("rootFiber")]),s._v("开始向下深度优先遍历。为遍历到的每个"),t("code",[s._v("Fiber节点")]),s._v("调用"),t("a",{attrs:{href:"https://github.com/facebook/react/blob/970fa122d8188bafa600e9b5214833487fbf1092/packages/react-reconciler/src/ReactFiberBeginWork.new.js#L3058",target:"_blank",rel:"noopener noreferrer"}},[s._v("beginWork方法"),t("OutboundLink")],1),s._v("。")]),s._v(" "),t("p",[s._v("该方法会根据传入的"),t("code",[s._v("Fiber节点")]),s._v("创建"),t("code",[s._v("子Fiber节点")]),s._v("，并将这两个"),t("code",[s._v("Fiber节点")]),s._v("连接起来。")]),s._v(" "),t("p",[s._v("当遍历到叶子节点（即没有子组件的组件）时就会进入“归”阶段。")]),s._v(" "),t("h2",{attrs:{id:"归-阶段"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#归-阶段"}},[s._v("#")]),s._v(" “归”阶段")]),s._v(" "),t("p",[s._v("在“归”阶段会调用"),t("a",{attrs:{href:"https://github.com/facebook/react/blob/970fa122d8188bafa600e9b5214833487fbf1092/packages/react-reconciler/src/ReactFiberCompleteWork.new.js#L652",target:"_blank",rel:"noopener noreferrer"}},[s._v("completeWork"),t("OutboundLink")],1),s._v("处理"),t("code",[s._v("Fiber节点")]),s._v("。")]),s._v(" "),t("p",[s._v("当某个"),t("code",[s._v("Fiber节点")]),s._v("执行完"),t("code",[s._v("completeWork")]),s._v("，如果其存在"),t("code",[s._v("兄弟Fiber节点")]),s._v("（即"),t("code",[s._v("fiber.sibling !== null")]),s._v("），会进入其"),t("code",[s._v("兄弟Fiber")]),s._v("的“递”阶段。")]),s._v(" "),t("p",[s._v("如果不存在"),t("code",[s._v("兄弟Fiber")]),s._v("，会进入"),t("code",[s._v("父级Fiber")]),s._v("的“归”阶段。")]),s._v(" "),t("p",[s._v("“递”和“归”阶段会交错执行直到“归”到"),t("code",[s._v("rootFiber")]),s._v("。至此，"),t("code",[s._v("render阶段")]),s._v("的工作就结束了。")]),s._v(" "),t("h2",{attrs:{id:"例子"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#例子"}},[s._v("#")]),s._v(" 例子")]),s._v(" "),t("p",[s._v("以上一节的例子举例：")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("App")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("div"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n      i am\n      "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("span"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("KaSong"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("span"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("div"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nReactDOM"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("render")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("App "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" document"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getElementById")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")]),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("p",[s._v("对应的"),t("code",[s._v("Fiber树")]),s._v("结构：\n"),t("img",{attrs:{src:s.$withBase("/img/fiber.png"),alt:"Fiber架构"}})]),s._v(" "),t("p",[t("code",[s._v("render阶段")]),s._v("会依次执行：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(". rootFiber beginWork\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(". App Fiber beginWork\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(". div Fiber beginWork\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(". "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"i am"')]),s._v(" Fiber beginWork\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(". "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"i am"')]),s._v(" Fiber completeWork\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(". span Fiber beginWork\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(". span Fiber completeWork\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(". div Fiber completeWork\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(". App Fiber completeWork\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(". rootFiber completeWork\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")]),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),t("p",[s._v("之所以没有 “KaSong” Fiber 的 beginWork/completeWork，是因为作为一种性能优化手段，针对只有单一文本子节点的"),t("code",[s._v("Fiber")]),s._v("，"),t("code",[s._v("React")]),s._v("会特殊处理。")])]),s._v(" "),t("details",{staticClass:"custom-block details"},[t("summary",[s._v("自己试一试 Demo")]),s._v(" "),t("p",[s._v("我在"),t("code",[s._v("beginWork")]),s._v("和"),t("code",[s._v("completeWork")]),s._v("调用时打印"),t("code",[s._v("fiber.tag")]),s._v("和"),t("code",[s._v("fiber.type")]),s._v("。")]),s._v(" "),t("p",[s._v("你可以从"),t("a",{attrs:{href:"https://github.com/facebook/react/blob/970fa122d8188bafa600e9b5214833487fbf1092/packages/react-reconciler/src/ReactWorkTags.js",target:"_blank",rel:"noopener noreferrer"}},[s._v("ReactWorkTags.js"),t("OutboundLink")],1),s._v("看到"),t("code",[s._v("Fiber节点")]),s._v("的所有"),t("code",[s._v("tag")]),s._v("定义。")]),s._v(" "),t("p",[s._v("相信多调试几次，你一定能明白方法的调用顺序")]),s._v(" "),t("p",[t("RouterLink",{attrs:{to:"/12.React技术揭秘/02.架构篇/me.html"}},[s._v("关注公众号")]),s._v("，后台回复"),t("strong",[s._v("904")]),s._v("获得在线Demo地址")],1)]),s._v(" "),t("details",{staticClass:"custom-block details"},[t("summary",[s._v("performUnitOfWork 的递归版本")]),s._v(" "),t("p",[s._v("如果将"),t("code",[s._v("performUnitOfWork")]),s._v("转化为递归版本，大体代码如下：")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("performUnitOfWork")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("fiber")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 执行beginWork")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("fiber"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("child"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("performUnitOfWork")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("fiber"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("child"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 执行completeWork")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("fiber"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sibling"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("performUnitOfWork")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("fiber"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sibling"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")]),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])])]),s._v(" "),t("h2",{attrs:{id:"总结"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[s._v("#")]),s._v(" 总结")]),s._v(" "),t("p",[s._v("本节我们介绍了"),t("code",[s._v("render阶段")]),s._v("会调用的方法。在接下来两节中，我们会讲解"),t("code",[s._v("beginWork")]),s._v("和"),t("code",[s._v("completeWork")]),s._v("做的具体工作。")]),s._v(" "),t("h2",{attrs:{id:"参考资料"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[s._v("#")]),s._v(" 参考资料")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://indepth.dev/the-how-and-why-on-reacts-usage-of-linked-list-in-fiber-to-walk-the-components-tree/",target:"_blank",rel:"noopener noreferrer"}},[s._v("The how and why on React’s usage of linked list in Fiber to walk the component’s tree"),t("OutboundLink")],1)]),s._v(" "),t("p",[t("a",{attrs:{href:"https://indepth.dev/inside-fiber-in-depth-overview-of-the-new-reconciliation-algorithm-in-react/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Inside Fiber: in-depth overview of the new reconciliation algorithm in React"),t("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=e.exports}}]);